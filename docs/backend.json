{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile in the Tech Path Weaver application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "authId": {
          "type": "string",
          "description": "Identifier from the external authentication provider (e.g., Google, Telegram)."
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "skills": {
          "type": "array",
          "description": "List of user's skills.",
          "items": {
            "type": "string"
          }
        },
        "experience": {
          "type": "string",
          "description": "User's work experience description."
        },
        "interests": {
          "type": "array",
          "description": "List of user's interests.",
          "items": {
            "type": "string"
          }
        },
        "careerPathIds": {
          "type": "array",
          "description": "References to CareerPaths recommended to the user. (Relationship: UserProfile 1:N CareerPath)",
          "items": {
            "type": "string"
          }
        },
        "mentorshipId": {
          "type": "string",
          "description": "Reference to Mentorship. (Relationship: UserProfile 1:1 Mentorship)"
        }
      },
      "required": [
        "id",
        "authId",
        "firstName",
        "lastName",
        "email",
        "skills",
        "experience",
        "interests"
      ]
    },
    "CareerPath": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CareerPath",
      "type": "object",
      "description": "Represents a recommended career path for a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the CareerPath entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the career path (e.g., Data Scientist, Web Developer)."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the career path."
        },
        "requiredSkills": {
          "type": "array",
          "description": "List of skills required for this career path.",
          "items": {
            "type": "string"
          }
        },
        "recommendedCourses": {
          "type": "array",
          "description": "List of courses recommended for this career path.",
          "items": {
            "type": "string"
          }
        },
        "userProfileIds": {
          "type": "array",
          "description": "References to UserProfiles. (Relationship: CareerPath 1:N UserProfile)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "requiredSkills",
        "recommendedCourses"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course recommended for skill development.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Course entity."
        },
        "title": {
          "type": "string",
          "description": "Title of the course."
        },
        "description": {
          "type": "string",
          "description": "Description of the course content."
        },
        "provider": {
          "type": "string",
          "description": "Provider of the course (e.g., Coursera, Udemy)."
        },
        "url": {
          "type": "string",
          "description": "URL of the course.",
          "format": "uri"
        },
        "careerPathIds": {
          "type": "array",
          "description": "References to CareerPaths. (Relationship: Course N:N CareerPath)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "provider",
        "url"
      ]
    },
    "Mentorship": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Mentorship",
      "type": "object",
      "description": "Represents a mentorship connection between a user and a mentor.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Mentorship entity."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to the mentor's UserProfile. (Relationship: UserProfile 1:1 Mentorship)"
        },
        "menteeId": {
          "type": "string",
          "description": "Reference to the mentee's UserProfile. (Relationship: UserProfile 1:1 Mentorship)"
        },
        "startDate": {
          "type": "string",
          "description": "Start date of the mentorship.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "End date of the mentorship (if applicable).",
          "format": "date-time"
        },
        "goals": {
          "type": "string",
          "description": "Description of the goals of the mentorship."
        }
      },
      "required": [
        "id",
        "mentorId",
        "menteeId",
        "startDate",
        "goals"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profiles.  Includes 'authId' for authorization independence.  'userId' corresponds to the Firebase Authentication UID.",
          "params": [
            {
              "name": "userId",
              "description": "The Firebase Authentication UID of the user."
            }
          ]
        }
      },
      {
        "path": "/careerPaths/{careerPathId}",
        "definition": {
          "entityName": "CareerPath",
          "schema": {
            "$ref": "#/backend/entities/CareerPath"
          },
          "description": "Stores career path information.",
          "params": [
            {
              "name": "careerPathId",
              "description": "Unique identifier for the career path."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Stores course information.",
          "params": [
            {
              "name": "courseId",
              "description": "Unique identifier for the course."
            }
          ]
        }
      },
      {
        "path": "/mentorships/{mentorshipId}",
        "definition": {
          "entityName": "Mentorship",
          "schema": {
            "$ref": "#/backend/entities/Mentorship"
          },
          "description": "Stores mentorship connection information.",
          "params": [
            {
              "name": "mentorshipId",
              "description": "Unique identifier for the mentorship."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore data structure is designed for the Tech Path Weaver application, focusing on career path recommendations for women in technology. It emphasizes authorization independence, clarity, and scalability.  User profiles and associated data are organized under the `/users/{userId}` path to ensure clear ownership and simplified security rules.\n\nAuthorization Independence is achieved by storing the `authId` within the UserProfile document. This eliminates the need for security rules to fetch authentication information during write operations.\n\nTo support secure `list` operations (QAPs), we utilize structural segregation and path-based ownership. Each collection is designed with a homogenous security posture.  For example, user profile data is segregated under the `/users/{userId}` collection, ensuring that only the authenticated user can access their own profile data.\n\nThe structure supports invariants by enforcing ownership via the path structure and utilizing server timestamps for creation and modification dates (though timestamps aren't explicitly in the schema, the structure is built to accommodate them). This structure facilitates simple, robust, and easily debuggable security rules."
  }
}